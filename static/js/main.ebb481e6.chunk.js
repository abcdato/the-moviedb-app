(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{107:function(e,t,r){},109:function(e,t,r){},183:function(e,t,r){},184:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=r(23),c=r.n(s),o=r(32),i=r.n(o),u=r(45),l=r(54),d=r(84),h=r(101),v=r(98),p=r(188),j=r(192),g=r(189),m=r(191),f=r(85),b=r.n(f),x=r(190),O=r(42),w=(r(107),r(11)),y=function(e){var t=e.title,r=e.releaseDate,a=e.overview,n=e.posterPath;var s=r?Object(x.a)(new Date(r),"MMMM Q, y"):null,c="https://image.tmdb.org/t/p/w200/".concat(n),o=Object(w.jsx)("img",{className:"card__poster",src:c,alt:"movie poster"}),i=a?function(e,t,r){if(e.length<=t)return e;var a=e.substr(0,t-1);return"".concat(r?a.substr(0,a.lastIndexOf(" ")):a," ...")}(a,160,!0):null,u=Object(w.jsx)(O.a,{description:"Image Not Found"});return Object(w.jsxs)("li",{className:"movie-card card",children:[Object(w.jsx)("div",{className:"card__poster-wrapper",children:n?o:u}),Object(w.jsxs)("div",{className:"card__properties",children:[Object(w.jsx)("h3",{className:"card__title",children:t}),Object(w.jsx)("div",{className:"card__release-date",children:s}),Object(w.jsxs)("div",{className:"card__genres",children:[Object(w.jsx)("div",{className:"card__genre",children:"action"}),Object(w.jsx)("div",{className:"card__genre",children:"drama"})]}),Object(w.jsx)("p",{className:"card__overview",children:i})]})]})};y.defaultProps={posterPath:"",releaseDate:""};var _=y,P=function e(){var t=this;Object(l.a)(this,e),this.key="1be9a44c716204acb901eac3dee95b08",this.url="https://api.themoviedb.org/3/search/movie",this.getData=function(){var e=Object(u.a)(i.a.mark((function e(r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.url,"?api_key=").concat(t.key).concat(r));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getMovies=function(){var e=Object(u.a)(i.a.mark((function e(r,a){var n,s,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=9;break}return e.next=4,t.getData("&query=".concat(r,"&page=").concat(a));case 4:return n=e.sent,s=t.tranformData(n),c=n.total_pages,o=n.total_results,e.abrupt("return",{movies:s,totalPages:c,totalResults:o});case 9:return e.abrupt("return",!1);case 12:throw e.prev=12,e.t0=e.catch(0),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}(),this.tranformData=function(e){return e.results.map((function(e){return{id:e.id,title:e.title,releaseDate:e.release_date,overview:e.overview,posterPath:e.poster_path}}))}},D=(r(109),function(e){Object(h.a)(r,e);var t=Object(v.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).movieService=new P,e.state={movies:[],totalPages:null,query:"",currentPage:1,loading:!1,error:!1,errorMessage:""},e.debouncedLoadData=b()(e.loadData,750),e.onError=function(t){e.setState((function(){return{loading:!1,error:!0,errorMessage:t}}))},e.onPageChange=function(t){e.setState((function(){return{currentPage:t,loading:!0}}))},e.onInputChange=function(t){e.setState((function(){return{query:t.target.value,currentPage:1,loading:!0}}),(function(){var t=e.state.query;e.debouncedLoadData(t.trim())}))},e.showMovies=function(e){return e&&e.map((function(e){var t=e.id,r=e.title,a=e.releaseDate,n=e.overview,s=e.posterPath;return Object(w.jsx)(_,{title:r,releaseDate:a,overview:n,posterPath:s},t)}))},e}return Object(d.a)(r,[{key:"componentDidUpdate",value:function(e,t){var r=this.state,a=r.query,n=r.currentPage;n!==t.currentPage&&this.loadData(a,n)}},{key:"loadData",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:1,e.prev=1,e.next=4,this.movieService.getMovies(t,r);case 4:a=e.sent,t&&!a.totalResults?this.onError("Unfortunately we couldn't find any movies"):t&&a.totalResults?this.setState((function(){return{movies:a.movies,totalPages:a.totalPages,loading:!1,error:!1}})):a||this.setState((function(){return{movies:[],loading:!1,error:!1}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.onError("Couldn't load the data.");case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.movies,r=e.totalPages,a=e.currentPage,n=e.loading,s=e.query,c=e.error,o=e.errorMessage,i=!(n||c)&&0!==t.length,u=n?Object(w.jsx)(p.a,{size:"large"}):null,l=i?this.showMovies(t):null,d=c?Object(w.jsx)(j.a,{message:"Error",description:o,type:"warning",showIcon:!0}):null,h=i?Object(w.jsx)(g.a,{current:a,pageSize:1,showSizeChanger:!1,onChange:this.onPageChange,total:r}):null;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("header",{className:"header",children:Object(w.jsx)(m.a,{placeholder:"Type to search...",value:s,onChange:this.onInputChange})}),Object(w.jsx)("main",{className:"main",children:Object(w.jsxs)("ul",{className:"movie-list list",children:[u,d,l]})}),Object(w.jsx)("footer",{className:"footer",children:h})]})}}]),r}(a.Component)),N=D;r(183);var k=function(){return Object(w.jsx)("div",{className:"app",children:Object(w.jsx)(N,{})})},M=(r.p,n.a.createElement(k));c.a.render(M,document.getElementById("root"))}},[[184,1,2]]]);
//# sourceMappingURL=main.ebb481e6.chunk.js.map